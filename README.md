# Python-SQL eCommerce Data Analysis Project

## Description
This project involves analyzing eCommerce data using Python and SQL. The data is sourced from a [Kaggle dataset](https://www.kaggle.com/datasets/devarajv88/target-dataset?select=products.csv). The analysis is performed on Jupyter Notebook, using libraries such as Pandas, Matplotlib, Seaborn, MySQL Connector, and NumPy. The project aims to extract insights and answer various business-related questions through SQL queries and data visualizations.

## Table of Contents
- [Installation](#installation)
- [Usage](#usage)
- [Features](#features)
- [Contributing](#contributing)

## Installation
To set up the eCommerce Data Analysis Project, follow these steps:

1. **Clone the repository**:
    ```bash
    git clone https://github.com/your-username/ecommerce-data-analysis.git
    cd ecommerce-data-analysis
    ```

2. **Install the required Python libraries**:
    ```bash
    pip install pandas matplotlib seaborn mysql-connector-python numpy
    ```

## Usage

To analyze the eCommerce data, follow these steps:

1. **Import the necessary libraries**:
    ```python
    import pandas as pd
    import matplotlib.pyplot as plt
    import seaborn as sns
    import mysql.connector
    import numpy as np
    ```

2. **Load the dataset**:
    ```python
    df = pd.read_csv('path/to/products.csv')
    ```

3. **Connect to the MySQL database**:
    ```python
    connection = mysql.connector.connect(
        host='your_host',
        user='your_username',
        password='your_password',
        database='your_database'
    )
    cursor = connection.cursor()
    ```

4. **Execute SQL queries to solve the following problems**:

### Basic Queries
1. **List all unique cities where customers are located**:
    ```sql
    SELECT DISTINCT city FROM customers;
    ```

2. **Count the number of orders placed in 2017**:
    ```sql
    SELECT COUNT(*) FROM orders WHERE YEAR(order_date) = 2017;
    ```

3. **Find the total sales per category**:
    ```sql
    SELECT category, SUM(total_amount) FROM orders GROUP BY category;
    ```

4. **Calculate the percentage of orders that were paid in installments**:
    ```sql
    SELECT (COUNT(*) * 100.0 / (SELECT COUNT(*) FROM orders)) AS installment_percentage FROM orders WHERE payment_type = 'installments';
    ```

5. **Count the number of customers from each state**:
    ```sql
    SELECT state, COUNT(*) FROM customers GROUP BY state;
    ```

### Intermediate Queries
1. **Calculate the number of orders per month in 2018**:
    ```sql
    SELECT MONTH(order_date) AS month, COUNT(*) FROM orders WHERE YEAR(order_date) = 2018 GROUP BY MONTH(order_date);
    ```

2. **Find the average number of products per order, grouped by customer city**:
    ```sql
    SELECT customer_city, AVG(product_count) FROM orders GROUP BY customer_city;
    ```

3. **Calculate the percentage of total revenue contributed by each product category**:
    ```sql
    SELECT category, (SUM(total_amount) * 100.0 / (SELECT SUM(total_amount) FROM orders)) AS revenue_percentage FROM orders GROUP BY category;
    ```

4. **Identify the correlation between product price and the number of times a product has been purchased**:
    ```python
    correlation = df['price'].corr(df['purchase_count'])
    print("Correlation between price and purchase count:", correlation)
    ```

5. **Calculate the total revenue generated by each seller, and rank them by revenue**:
    ```sql
    SELECT seller_id, SUM(total_amount) AS total_revenue FROM orders GROUP BY seller_id ORDER BY total_revenue DESC;
    ```

### Advanced Queries
1. **Calculate the moving average of order values for each customer over their order history**:
    ```sql
    SELECT customer_id, AVG(order_value) OVER (PARTITION BY customer_id ORDER BY order_date ROWS BETWEEN 2 PRECEDING AND CURRENT ROW) AS moving_avg_order_value FROM orders;
    ```

2. **Calculate the cumulative sales per month for each year**:
    ```sql
    SELECT YEAR(order_date) AS year, MONTH(order_date) AS month, SUM(total_amount) OVER (PARTITION BY YEAR(order_date), MONTH(order_date) ORDER BY order_date) AS cumulative_sales FROM orders;
    ```

3. **Calculate the year-over-year growth rate of total sales**:
    ```sql
    SELECT YEAR(order_date) AS year, (SUM(total_amount) - LAG(SUM(total_amount)) OVER (ORDER BY YEAR(order_date))) / LAG(SUM(total_amount)) OVER (ORDER BY YEAR(order_date)) * 100 AS yoy_growth_rate FROM orders GROUP BY YEAR(order_date);
    ```

4. **Calculate the retention rate of customers**:
    ```sql
    SELECT customer_id, CASE WHEN MIN(order_date) OVER (PARTITION BY customer_id) + INTERVAL 6 MONTH >= MAX(order_date) THEN 1 ELSE 0 END AS retention FROM orders GROUP BY customer_id;
    ```

5. **Identify the top 3 customers who spent the most money in each year**:
    ```sql
    SELECT YEAR(order_date) AS year, customer_id, SUM(total_amount) AS total_spent FROM orders GROUP BY YEAR(order_date), customer_id ORDER BY total_spent DESC LIMIT 3;
    ```

## Features
- **Data Extraction**: Extract data from a Kaggle dataset.
- **SQL Queries**: Perform basic, intermediate, and advanced SQL queries to extract insights.
- **Data Analysis**: Analyze eCommerce data using Python libraries.
- **Data Visualization**: Visualize data using Matplotlib and Seaborn.

## Contributing
We welcome contributions to the Python-SQL eCommerce Data Analysis Project! To contribute, follow these steps:

1. **Fork the repository**: Click the "Fork" button at the top right of the repository page.

2. **Clone your forked repository**:
    ```bash
    git clone https://github.com/your-username/ecommerce-data-analysis.git
    cd ecommerce-data-analysis
    ```

3. **Create a new branch**: Use a descriptive name for your branch.
    ```bash
    git checkout -b feature/your-feature-name
    ```

4. **Make your changes**: Implement your feature or bug fix.

5. **Commit your changes**: Write a clear and concise commit message.
    ```bash
    git commit -m "Add feature/fix description"
    ```

6. **Push to your branch**:
    ```bash
    git push origin feature/your-feature-name
    ```

7. **Create a Pull Request**: Go to the original repository and create a pull request from your forked repository.

Please ensure that your code adheres to our coding standards and includes appropriate tests. We will review your pull request and provide feedback if needed.
